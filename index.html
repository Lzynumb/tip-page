<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>日本語中級自测プログラム（全題完整版+翻译+语法讲解）</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "メイリオ", Meiryo, sans-serif; }
        body { background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; margin-bottom: 30px; }
        .settings { text-align: center; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; }
        .settings select, .settings button { padding: 10px 20px; font-size: 16px; }
        .quiz-area { display: none; }
        .question { background: #fafafa; padding: 20px; border-left: 4px solid #2196F3; border-radius: 8px; }
        .option { padding: 8px; border: 1px solid #eee; margin: 6px 0; cursor: pointer; }
        .option.selected { background: #e3f2fd; border-color: #2196F3; }
        .feedback { display: none; margin-top: 15px; padding: 15px; border-radius: 6px; }
        .correct { background: #e8f5e9; }
        .incorrect { background: #ffebee; }
        .progress { height: 10px; background: #eee; margin: 20px 0; }
        .progress-bar { height: 100%; background: #2196F3; width: 0%; }
        .result { display: none; text-align: center; }
    </style>
</head>

<body>
<div class="container">
    <h1>日本語中級自测プログラム</h1>

    <div class="settings">
        <select id="questionCount">
            <option value="10">10問</option>
            <option value="20">20問</option>
            <option value="all" selected>全問</option>
        </select>
        <button id="startBtn">テスト開始</button>
    </div>

    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>

    <div class="quiz-area" id="quizArea">
        <div class="question" id="questionContainer"></div>
        <div class="feedback" id="feedback"></div>
        <button id="submitBtn">回答する</button>
        <button id="nextBtn" style="display:none;">次へ</button>
    </div>

    <div class="result" id="result">
        <p id="resultText"></p>
        <button id="restartBtn">再チャレンジ</button>
    </div>
</div>
<script>
    // ⭐ 新增：安全乱序函数（不破坏原数组）
    function shuffle(array) {
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    const allQuestions = [
        {
            lesson: "第13课",
            number: 22,
            question: "入院するほどのものではないが、________。",
            translation: "虽然还没到要住院的程度，但________。",
            grammar: "「～ほうがいい」：表示委婉建议。",
            options: ["休まなくてもいい", "休んだほうがいい", "休まなければなりません", "休まなくてもかまわない"],
            answer: "B",
            answerText: "休んだほうがいい"
        },
        {
            lesson: "第13课",
            number: 23,
            question: "入社し_________の社員は仕事に慣れていないので不安だ。",
            translation: "刚进公司的员工因为不熟悉工作而感到不安。",
            grammar: "「～たて」：表示刚刚……",
            options: ["たて", "ても", "ばかり", "だけ"],
            answer: "A",
            answerText: "たて"
        },
        {
            lesson: "第13课",
            number: 24,
            question: "彼女は、________疲れていても、それを口に出したりしない。",
            translation: "她即便再累，也不会说出口。",
            grammar: "「たとえ～ても」：表示让步。",
            options: ["まるで", "たとえ", "例えば", "しかし"],
            answer: "B",
            answerText: "たとえ"
        },
            {
                lesson: "第13课",
                number: 25,
                question: "たとえ妻________、宇宙に行きたいという僕を止めることはできない。",
                translation: "即便是妻子，也无法阻止想去太空的我。",
                grammar: "「名詞+でも」：表示让步，意为“即使……也……”，用于举出极端的人或事物为例，强调结果不受其影响。",
                options: ["は", "ても", "に", "でも"],
                answer: "D",
                answerText: "でも"
            },
            {
                lesson: "第13课",
                number: 26,
                question: "入社したての社員は仕事に_________。",
                translation: "刚进公司的员工对于工作________。",
                grammar: "「～ので」：表示客观原因，前接句子简体形，意为“因为……所以……”，语气比「から」更正式、中立，多用于书面语。",
                options: ["慣れていないので不安だ", "慣れているので安心だ", "慣れていないので安心だ", "慣れているので不安だ"],
                answer: "A",
                answerText: "慣れていないので不安だ"
            },
            {
                lesson: "第13课",
                number: 27,
                question: "彼女は若い頃、ため息が出る________美しかった。",
                translation: "她年轻时美丽得让人叹服。",
                grammar: "「～ほど」：表示程度，前接动词基本形/ない形、形容词、名词+だ，意为“到……的程度”，此处强调美丽的程度极高。",
                options: ["ほど", "より", "ので", "ため"],
                answer: "A",
                answerText: "ほど"
            },
            {
                lesson: "第13课",
                number: 28,
                question: "「サントスさん、お国では日本と違ってクリスマスは家族と過ごすことが多いんですよね。」「________。」",
                translation: "“桑托斯先生，听说在您国家和日本不同，圣诞节大多和家人一起过呢。”“________。”",
                grammar: "「うん、そうだよ」：口语化肯定回应，“うん”是“はい”的随意说法，“そうだよ”比“そうです”更亲切，用于熟人之间的对话。",
                options: ["うん、そうだよ", "うん、そうだよね", "本当ですか", "なるほどですね"],
                answer: "A",
                answerText: "うん、そうだよ"
            },
            {
                lesson: "第13课",
                number: 29,
                question: "今年は暖かかったので捨てる________みかんがとれた。",
                translation: "今年因为天气暖和，收获了多得几乎要扔掉的橘子。",
                grammar: "「～ほど」：此处表示数量程度，意为“多得……”，前接动词基本形，强调数量达到了某种夸张的程度。",
                options: ["ように", "など", "ほど", "ほう"],
                answer: "C",
                answerText: "ほど"
            },
            {
                lesson: "第13课",
                number: 30,
                question: "店に入ったら、________ビールを注文することにしている。",
                translation: "进店后，我习惯先点一杯啤酒。",
                grammar: "「とりあえず」：副词，意为“暂且、首先”，用于表示优先做某件事，其他事情后续再处理，是日常口语常用词。",
                options: ["なんとなく", "とりあえず", "ただ", "ごと"],
                answer: "B",
                answerText: "とりあえず"
            },
            {
                lesson: "第13课",
                number: 31,
                question: "先生に対してその言い方は________ではないと思う。",
                translation: "我觉得那种说法对老师来说是不合适的。",
                grammar: "「適切」：ナ形容词，意为“合适的、恰当的”，「適切ではない」是其否定形式，用于评价行为、语言是否符合场景。",
                options: ["適切", "適度", "見慣れた", "ぴったり"],
                answer: "A",
                answerText: "適切"
            },
            {
                lesson: "第13课",
                number: 32,
                question: "<u>しぼり</u>たての牛乳はおいしいですね。",
                translation: "刚挤出来的牛奶真好喝啊。",
                grammar: "「しぼりたて」：「絞る」的连用形「しぼり」+「たて」，构成复合词，意为“刚挤的”，「～たて」接动词连用形可构成形容词性短语。",
                options: ["しぼり", "しぼる", "しぼっ", "しぼら"],
                answer: "A",
                answerText: "しぼり"
            },

            // ===================== 第14课（27题） =====================
            {
                lesson: "第14课",
                number: 12,
                question: "これは<u>————</u>なるミスとは思えない。",
                translation: "我觉得这不仅仅是单纯的失误。",
                grammar: "「単なる」：副词，读作「たんなる」，意为“仅仅、只不过”，常修饰名词，强调事物的简单性或不重要性。",
                options: ["せん", "たん", "ただ", "ぜん"],
                answer: "B",
                answerText: "たん"
            },
            {
                lesson: "第14课",
                number: 13,
                question: "なかなか来なかったバスがやっと_________。",
                translation: "迟迟不来的公交车终于来了。",
                grammar: "「やっと+动词た形」：「やっと」表示“终于、好不容易”，后接动作完成的过去式，强调经过长时间等待后动作才发生。",
                options: ["来た", "来ている", "来なかった", "来る"],
                answer: "A",
                answerText: "来た"
            },
            {
                lesson: "第14课",
                number: 14,
                question: "会議は5時間________、行われました。",
                translation: "会议持续了5个小时。",
                grammar: "「時間+にわたって」：表示动作或状态持续的时间范围，意为“持续……时间”，「にわたって」前接表示期间的名词。",
                options: ["に", "のうちに", "の間に", "にわたって"],
                answer: "D",
                answerText: "にわたって"
            },
            {
                lesson: "第14课",
                number: 15,
                question: "調査の結果を4枚________にまとめて出してください。",
                options: ["部", "冊", "程度", "種類"],
                answer: "C",
                translation: "请把调查结果整理成4页左右提交上来。",
                grammar: "「数量詞+程度に」：意为“大约……数量”，表示大致的范围，「程度」在这里用于弱化数量的精确性。"
            },
            {
                lesson: "第14课",
                number: 16,
                question: "この大学にはルーマニア、ポーランド________東ヨーロッパからの留学生が多い。",
                translation: "这所大学有很多来自罗马尼亚、波兰等东欧国家的留学生。",
                grammar: "「名詞+といった」：表示列举，意为“……之类的”，用于举出代表性的例子，暗示还有其他类似的人或事物。",
                options: ["というと", "といえば", "といえども", "といった"],
                answer: "D",
                answerText: "といった"
            },
            {
                lesson: "第14课",
                number: 17,
                question: "そのドラマは1年________放送されるという。",
                translation: "听说那部电视剧要播出一整年。",
                grammar: "「期間+にわたって」：表示动作持续的时间跨度，意为“在……期间内”，此处强调电视剧放送的时间长达一年。",
                options: ["について", "うちに", "といった", "にわたって"],
                answer: "D",
                answerText: "にわたって"
            },
            {
                lesson: "第14课",
                number: 18,
                question: "「あれ、雨が降ってきましたね。」「本当ですね。今夜は大雨になるそうですよ。雨が強くならない________帰りましょう。」",
                translation: "“哎呀，下雨了呢。”“是啊，听说今晚要下大雨。趁雨还没变大，我们回去吧。”",
                grammar: "「～うちに」：表示“趁……的时候”，前接动词基本形/ない形，用于强调在某种状态持续期间做某事。",
                options: ["ように", "うちに", "ために", "までに"],
                answer: "B",
                answerText: "うちに"
            },
            {
                lesson: "第14课",
                number: 19,
                question: "今回の電気料金の値上げ________の説明は分かりやすかった。",
                translation: "这次关于电费涨价的说明很易懂。",
                grammar: "「名詞+に関して」：表示“关于……”，用于提示话题，语气比「について」更正式，常用于书面或公开场合的发言。",
                options: ["において", "に関する", "に関して", "によって"],
                answer: "C",
                answerText: "に関して"
            },
            {
                lesson: "第14课",
                number: 20,
                question: "湯川秀樹、利根川進________ノーベル賞受賞者に京都大学出身者が多い。",
                translation: "汤川秀树、利根川进等诺贝尔奖获得者中，很多都是京都大学毕业的。",
                grammar: "「名詞+といった」：表示不完全列举，意为“……等”，用于举出典型例子，暗示还有其他同类人物。",
                options: ["と", "という", "といった", "とは"],
                answer: "C",
                answerText: "といった"
            },
            {
                lesson: "第14课",
                number: 21,
                question: "ギョーザは中国のワンさん________おふくろの味だ。",
                translation: "对于中国人小王来说，饺子就是妈妈的味道。",
                grammar: "「名詞+にとって」：表示“对于……来说”，用于提示评价的主体，强调从某人的立场出发的感受或判断。",
                options: ["に対して", "にとって", "について", "には"],
                answer: "B",
                answerText: "にとって"
            },
            {
                lesson: "第14课",
                number: 22,
                question: "お引っ越しなどでガスの使用を中止される際は、_________。",
                translation: "当您因搬家等原因要停止使用燃气时，工作人员会登门拜访。",
                grammar: "「伺う」：是「訪ねる」「聞く」的自谦语，意为“拜访、请教”，此处用于服务行业对顾客的礼貌表达，体现尊敬。",
                options: ["係員がお宅に行ってください", "係の者がお宅に伺います", "係員がお宅に行きません", "係員がお宅に伺いました"],
                answer: "B",
                answerText: "係の者がお宅に伺います"
            },
            {
                lesson: "第14课",
                number: 23,
                question: "田中さんは7年間________このテーマについて研究してきた。",
                translation: "田中先生围绕这个主题研究了7年。",
                grammar: "「期間+にわたって」：表示动作持续的时间长度，意为“在……期间内一直……”，强调研究的持续性。",
                options: ["について", "にわたって", "に関して", "にとって"],
                answer: "B",
                answerText: "にわたって"
            },
            {
                lesson: "第14课",
                number: 24,
                question: "何年も住んでいる________、日本の常識が分かるようになってきた。",
                translation: "住了好几年，渐渐明白了日本的常识。",
                grammar: "「～うちに」：表示在某一状态持续的过程中，发生了某种变化，意为“在……过程中”，此处强调随着居住时间增长而产生的变化。",
                options: ["ぐらい", "ころ", "うちに", "あいだに"],
                answer: "C",
                answerText: "うちに"
            },
            {
                lesson: "第14课",
                number: 25,
                question: "このチームは選手の層が________、競争が激しいため、どんどん強くなっている。",
                translation: "这个团队的选手梯队很厚实，竞争激烈，所以越来越强。",
                grammar: "「厚い」：形容词，此处意为“（人员、基础）雄厚、扎实”，「層が厚い」是固定搭配，指人才储备充足。",
                options: ["高い", "厚い", "高く", "厚く"],
                answer: "D",
                answerText: "厚く"
            },
            {
                lesson: "第14课",
                number: 26,
                question: "これからの社会を________のは若者だ。",
                translation: "支撑未来社会的是年轻人。",
                grammar: "「支える」：他动词，意为“支撑、支持”，「社会を支える」是常用搭配，指承担社会发展的重任。",
                options: ["目指している", "支えている", "起こっている", "語っている"],
                answer: "B",
                answerText: "支えている"
            },
            {
                lesson: "第14课",
                number: 27,
                question: "江戸時代________もっとも力を持っているのは将軍だ。",
                translation: "在江户时代，最有权势的是将军。",
                grammar: "「時代+において」：表示“在……时期/场合”，用于提示时间或场景，是书面语中常用的表达方式，比「に」更正式。",
                options: ["において", "にとって", "として", "に対して"],
                answer: "A",
                answerText: "において"
            },

            // ===================== 第15课（36题） =====================
            {
                lesson: "第15课",
                number: 26,
                question: "田中さんは現代日本文学の家族関係_______表現を調べている。",
                translation: "田中先生正在研究现代日本文学中关于家庭关系的表达。",
                grammar: "「名詞+に関する」：表示“关于……的”，后接名词，是连体修饰结构，用于限定话题的范围，书面语常用。",
                options: ["に関して", "にとって", "に関する", "に対して"],
                answer: "C",
                answerText: "に関する"
            },
            {
                lesson: "第15课",
                number: 27,
                question: "予約は受け付けるが、希望の日に________予約が取れるわけではない。",
                translation: "虽然接受预约，但并非在希望的日期就一定能预约上。",
                grammar: "「必ずしも～わけではない」：固定句型，意为“不一定……、未必……”，用于否定事物的绝对性，语气委婉。",
                options: ["全く", "ぜんぜん", "必ずしも", "どうしても"],
                answer: "C",
                answerText: "必ずしも"
            },
            {
                lesson: "第15课",
                number: 28,
                question: "会議で各国の地球温暖化_______問題点を整理した。",
                translation: "会议上整理了各国关于全球变暖的问题点。",
                grammar: "「名詞+に関する」：连体修饰结构，意为“关于……的”，后接名词，此处用于修饰「問題点」，明确问题的主题。",
                options: ["にとって", "によって", "に関する", "に沿って"],
                answer: "C",
                answerText: "に関する"
            },
            {
                lesson: "第15课",
                number: 29,
                question: "このアパートは電車が通る_______揺れる。",
                translation: "这栋公寓每次有电车经过都会晃动。",
                grammar: "「動詞基本形+たびに」：意为“每当……就……”，表示每次发生前项动作，都会伴随后项的结果或状态。",
                options: ["のに", "ほど", "たびに", "たまに"],
                answer: "C",
                answerText: "たびに"
            },
            {
                lesson: "第15课",
                number: 30,
                question: "初めは隣の部屋の音が気になったが、________慣れてきた。",
                translation: "一开始很在意隔壁房间的声音，但渐渐习惯了。",
                grammar: "「徐々に」：副词，意为“渐渐地、慢慢地”，用于描述动作或状态的缓慢变化，强调变化的过程性。",
                options: ["一見", "徐々に", "さすがに", "そこで"],
                answer: "B",
                answerText: "徐々に"
            },
            {
                lesson: "第15课",
                number: 31,
                question: "田中さんは常に会社の中にいる_______。外出することもある。",
                translation: "田中先生并不总是在公司里，也有外出的时候。",
                grammar: "「～わけではない」：意为“并不是……”，用于否定前面的判断，纠正误解，说明实际情况并非如此。",
                options: ["わけだ", "わけだった", "わけではない", "わけにはいかない"],
                answer: "C",
                answerText: "わけではない"
            },
            {
                lesson: "第15课",
                number: 32,
                question: "昔は砂糖は薬_______用いられたこともあるという。",
                translation: "据说以前砂糖也曾被当作药材使用。",
                grammar: "「名詞+として」：表示“作为……”，用于说明事物的用途、身份或立场，此处强调砂糖的用途是药材。",
                options: ["として", "から", "だけ", "にとって"],
                answer: "A",
                answerText: "として"
            },
            {
                lesson: "第15课",
                number: 33,
                question: "この病気に関する研究は少ないが、_______ないわけではない。",
                translation: "关于这种疾病的研究很少，但也并非完全没有。",
                grammar: "「全く～ないわけではない」：意为“并非完全不……”，「全く」加强否定语气，与「わけではない」搭配后表示部分肯定。",
                options: ["少ししか", "全く", "全部", "必ず"],
                answer: "B",
                answerText: "全く"
            },
            {
                lesson: "第15课",
                number: 34,
                question: "明日からアメリカへ行くが、観光で______わけではない。",
                translation: "明天要去美国，但并不是去观光的。",
                grammar: "「名詞+で+わけではない」：意为“并不是因为……（目的）”，用于否定动作的目的，说明真实原因不同。",
                options: ["行き", "行かない", "行って", "行く"],
                answer: "D",
                answerText: "行く"
            },
            {
                lesson: "第15课",
                number: 35,
                question: "彼女は_______たびに、興味深い話を聞かせてくれる。",
                translation: "每次见到她，她都会给我讲有趣的事。",
                grammar: "「動詞基本形+たびに」：意为“每当……就……”，前接「会う」的基本形，强调每次见面都会发生后项的动作。",
                options: ["会う", "会って", "会った", "会い"],
                answer: "A",
                answerText: "会う"
            },
            {
                lesson: "第15课",
                number: 36,
                question: "環境問題_______会議は京都で開かれる予定だ。",
                translation: "关于环境问题的会议预定在京都召开。",
                grammar: "「名詞+に関する」：连体修饰结构，意为“关于……的”，后接名词「会議」，明确会议的主题是环境问题。",
                options: ["に関して", "に関する", "について", "によって"],
                answer: "B",
                answerText: "に関する"
            },

            // ===================== 第16课（25题） =====================
            {
                lesson: "第16课",
                number: 16,
                question: "市は市民の要望　　　　、図書館を夜九時まで開くことにした。",
                translation: "市政府响应市民的要求，决定将图书馆开放到晚上九点。",
                grammar: "「名詞+に応じて」：意为“响应……、按照……”，用于表示根据他人的要求、意见或情况采取行动。",
                options: ["にかんして", "におうじて", "にとって", "につれて"],
                answer: "B",
                answerText: "におうじて"
            },
            {
                lesson: "第16课",
                number: 17,
                question: "少子高齢化　　　　、地域社会はますます活力がなくなっている。",
                translation: "由于少子老龄化，地方社区的活力越来越弱。",
                grammar: "「名詞+によって」：表示原因，意为“由于……”，用于说明客观因素导致的结果，书面语常用。",
                options: ["にとって", "にたいして", "にさいして", "によって"],
                answer: "D",
                answerText: "によって"
            },
            {
                lesson: "第16课",
                number: 18,
                question: "犯人は車で逃げた　　　　。",
                translation: "犯人似乎是开车逃跑的。",
                grammar: "「～とみられる」：意为“被认为……、似乎……”，是比「～と思われる」更正式的表达，常用于新闻或报告中。",
                options: ["とみられる", "としている", "といかれる", "とこられる"],
                answer: "A",
                answerText: "とみられる"
            },
            {
                lesson: "第16课",
                number: 19,
                question: "学校側は少子化にそなえてカリキュラムを見直す　　　　。",
                translation: "学校方面准备为应对少子化重新审视课程体系。",
                grammar: "「～としている」：表示计划或准备，意为“打算……、准备……”，用于描述主体的预定行动。",
                options: ["にわたる", "としている", "における", "わけではない"],
                answer: "B",
                answerText: "としている"
            },
            {
                lesson: "第16课",
                number: 20,
                question: "この学校には十分な予算がある　　　、設備の改善にはあまり使われていない。",
                translation: "这所学校虽然有充足的预算，但并没有太多用于设备改善。",
                grammar: "「～にもかかわらず」：表示让步，意为“尽管……但是……”，前接名词+だ/な形容词+だ/句子简体形，强调转折关系。",
                options: ["にもかかわらず", "にかかわらず", "にほかならない", "にちがいない"],
                answer: "A",
                answerText: "にもかかわらず"
            },
            {
                lesson: "第16课",
                number: 21,
                question: "社名を変更する　　　、あらたなホームページを立ち上げた。",
                translation: "在更改公司名称的同时，推出了新的官网。",
                grammar: "「～とともに」：表示同时发生，意为“与……同时”，前接动词基本形或名词，强调两个动作同步进行。",
                options: ["として", "としたら", "としても", "とともに"],
                answer: "D",
                answerText: "とともに"
            },
            {
                lesson: "第16课",
                number: 22,
                question: "パスポートが必要かどうか確かめた　　　、不要だということだった。",
                translation: "我确认了一下是否需要护照，结果得知是不需要的。",
                grammar: "「動詞た形+ところ」：意为“……之后发现”，用于表示做完某个动作后，得到了某个结果或发现了某种情况。",
                options: ["こと", "どころ", "ところ", "こころ"],
                answer: "C",
                answerText: "ところ"
            },
            {
                lesson: "第16课",
                number: 23,
                question: "実際には「ナマケモノ」という動物が怠けている　　　。",
                translation: "实际上，树懒这种动物并不是懒惰的。",
                grammar: "「～わけではない」：意为“并不是……”，用于否定普遍的误解，说明事物的真实情况。",
                options: ["のではないか", "わけではない", "わけだ", "わけにはいかない"],
                answer: "B",
                answerText: "わけではない"
            },
            {
                lesson: "第16课",
                number: 24,
                question: "江戸時代　　　もっとも力を持っていたのは誰だろうか。",
                translation: "江户时代最有权势的是谁呢？",
                grammar: "「時代+において」：表示“在……时期”，用于提示时间范围，是正式的书面表达，此处用于历史话题的提问。",
                options: ["において", "におけて", "における", "におうじて"],
                answer: "A",
                answerText: "において"
            },
            {
                lesson: "第16课",
                number: 25,
                question: "日本語を使うときには数えきれない　　　の間違いをしてきた。",
                translation: "使用日语的时候，犯了无数的错误。",
                grammar: "「数えきれないほど」：意为“数不胜数的、无数的”，「ほど」表示程度，强调错误的数量极多。",
                options: ["ばかり", "ほかならない", "ほか", "ほど"],
                answer: "D",
                answerText: "ほど"
            },

            // ===================== 第18课（30题） =====================
            {
                lesson: "第18课",
                number: 13,
                question: "渡辺さんのおかげで、新品の鉛筆削りが手に________。",
                translation: "多亏了渡边先生，我得到了一个新的卷笔刀。",
                grammar: "「手に入る」：固定搭配，意为“得到、入手”，是自动词短语，主语是得到的物品，此处表示卷笔刀被我得到。",
                options: ["入れた", "取った", "入った", "持った"],
                answer: "C",
                answerText: "入った"
            },
            {
                lesson: "第18课",
                number: 14,
                question: "あの大学の学生ならきっと優れている________。",
                translation: "那所大学的学生肯定很优秀。",
                grammar: "「～に違いない」：表示肯定推测，意为“一定……、肯定……”，语气比「～だろう」更强烈，用于基于经验的判断。",
                options: ["わけだ", "ものだ", "ほどだ", "に違いない"],
                answer: "D",
                answerText: "に違いない"
            },
            {
                lesson: "第18课",
                number: 15,
                question: "厳しい練習を________、技術だけでなく、どんな困難にも負けない心が養われたと思います。",
                translation: "我认为通过严格的训练，不仅提升了技术，还培养了不畏任何困难的毅力。",
                grammar: "「～を通して」：意为“通过……、经由……”，表示通过某种手段或过程，获得某种结果或收获。",
                options: ["対して", "かけて", "よって", "通して"],
                answer: "D",
                answerText: "通して"
            },
            {
                lesson: "第18课",
                number: 16,
                question: "この映画は子供向けだが、本当は________見てもらいたい。",
                translation: "这部电影是面向孩子的，但其实我更希望大人们也能看看。",
                grammar: "「～に見てもらう」：意为“希望……看”，「見てもらう」是使役被动形式，表示希望对方做某事，此处省略了「も」，用「大人に」强调对象。",
                options: ["こちら", "大人に", "大人が", "子供に"],
                answer: "B",
                answerText: "大人に"
            },
            {
                lesson: "第18课",
                number: 17,
                question: "チョコレートがなくなっている。甘いものが好きな弟が食べた________。",
                translation: "巧克力没了，肯定是爱吃甜食的弟弟吃掉了。",
                grammar: "「～に違いない」：表示有依据的肯定推测，意为“肯定是……”，此处基于“弟弟爱吃甜食”的经验做出判断。",
                options: ["にしかできない", "にはずはない", "に違いない", "に決まる"],
                answer: "C",
                answerText: "に違いない"
            },
            {
                lesson: "第18课",
                number: 18,
                question: "都会________、郊外は住みやすいでしょう。",
                translation: "和城市相比，郊区应该更宜居吧。",
                grammar: "「名詞+に比べて」：意为“与……相比”，用于将两个事物进行比较，突出后项事物的特点。",
                options: ["にわたって", "に対して", "に比べて", "に関して"],
                answer: "C",
                answerText: "に比べて"
            },
            {
                lesson: "第18课",
                number: 19,
                question: "小さい子を一人で遠くに遊び________。",
                translation: "不能让小孩子一个人去远处玩。",
                grammar: "「～ものではない」：表示禁止或不应该，意为“不该……、不能……”，前接动词使役形「行かせる」，表示不应该让孩子去做某事。",
                options: ["行ったものではない", "行かせるものではない", "行かないものではない", "行かれるものではない"],
                answer: "B",
                answerText: "行かせるものではない"
            },
            {
                lesson: "第18课",
                number: 20,
                question: "田中先生は七年間________このテーマについて研究してきた。",
                translation: "田中先生围绕这个主题研究了七年。",
                grammar: "「期間+にわたって」：表示动作持续的时间跨度，意为“在……期间内一直……”，强调研究的长期性。",
                options: ["にとって", "にわたって", "に関して", "に対して"],
                answer: "B",
                answerText: "にわたって"
            },
            {
                lesson: "第18课",
                number: 21,
                question: "いいパソコンなんだけど、ちょっと大きいのが気________入らない。",
                translation: "电脑是台好电脑，但有点大，不太合心意。",
                grammar: "「気に入らない」：固定搭配，意为“不喜欢、不合心意”，是「気に入る」的否定形式，用于表达对事物的不满。",
                options: ["も", "に", "へ", "で"],
                answer: "B",
                answerText: "に"
            },
            {
                lesson: "第18课",
                number: 22,
                question: "君のおかげで、僕は________の新品の鉛筆削りを手に入れることができたのだ。",
                translation: "多亏了你，我才得到了这个崭新的卷笔刀。",
                grammar: "「ぴかぴか」：副词，意为“崭新的、亮晶晶的”，用于形容物品非常新，没有使用过的痕迹。",
                options: ["ぴったり", "さっぱい", "ぴかぴか", "ちらちら"],
                answer: "C",
                answerText: "ぴかぴか"
            },
            {
                lesson: "第18课",
                number: 23,
                question: "冷蔵庫に入れておいたケーキがない。誰かが食べた<u>________</u>。",
                translation: "放在冰箱里的蛋糕没了，肯定是有人吃掉了。",
                grammar: "「～に違いない」：表示有依据的肯定推测，意为“一定……、肯定……”，此处基于“蛋糕消失”的事实做出判断。",
                options: ["間違いない", "に間違いない", "違いない", "に違いない"],
                answer: "D",
                answerText: "に違いない"
            },
            {
                lesson: "第18课",
                number: 24,
                question: "そばはうどん<u>________</u>健康にいいと言われている。",
                translation: "据说荞麦面和乌冬面相比，更健康。",
                grammar: "「名詞+に比べて」：意为“与……相比”，用于两个事物的对比，突出前项事物的优势或特点。",
                options: ["において", "に比べて", "ほど", "のほうが"],
                answer: "B",
                answerText: "に比べて"
            },
            {
                lesson: "第18课",
                number: 25,
                question: "人の悪口を言う<u>________</u>。",
                translation: "不该说别人的坏话。",
                grammar: "「～ものではない」：表示道德或行为上的禁止，意为“不该……、不要……”，用于规劝他人不要做某事。",
                options: ["ものではない", "わけではない", "わけだ", "ものだ"],
                answer: "A",
                answerText: "ものではない"
            },
            {
                lesson: "第18课",
                number: 26,
                question: "あのパン屋はいつも大勢の人が並んでいる。よほど美味しい<u>________</u>。",
                translation: "那家面包店总是排着长队，肯定非常好吃。",
                grammar: "「よほど+形容词+に違いない」：「よほど」加强程度，意为“很、非常”，与「に違いない」搭配，强调基于现象的肯定推测。",
                options: ["に違います", "に違いない", "に違った", "に違いなかった"],
                answer: "B",
                answerText: "に違いない"
            },
                       {
                lesson: "第18课",
                number: 26,
                question: "あのパン屋はいつも大勢の人が並んでいる。よほど美味しい<u>________</u>。",
                translation: "那家面包店总是排着长队，肯定非常好吃。",
                grammar: "「よほど+形容词+に違いない」：「よほど」加强程度（很、非常），与「に違いない」搭配，基于客观现象做肯定推测，语气坚定。",
                options: ["に違います", "に違いない", "に違った", "に違いなかった"],
                answer: "B",
                answerText: "に違いない"
            },
            {
                lesson: "第18课",
                number: 27,
                question: "あの公園の桜はもう散っている<u>________</u>。",
                translation: "那个公园的樱花肯定已经凋谢了。",
                grammar: "「～ている+に違いない」：「ている」表动作结果存续（樱花凋谢后的状态），「に違いない」基于季节常识做肯定推测，意为“肯定……了”。",
                options: ["ことだ", "せいだ", "に違いない", "ものだ"],
                answer: "C",
                answerText: "に違いない"
            },
            {
                lesson: "第18课",
                number: 28,
                question: "日本語で日常的に使われる漢字が2000字以上ある。1年や2年で覚えられる<u>________</u>。",
                translation: "日语中日常使用的汉字有2000多个，不可能在1年或2年内记住。",
                grammar: "「～ものではない」：表“不可能、不该”，此处接可能动词「覚えられる」，强调“难以实现”，否定事情的可行性。",
                options: ["ことではない", "せいではない", "はずではない", "ものではない"],
                answer: "D",
                answerText: "ものではない"
            },
            {
                lesson: "第18课",
                number: 29,
                question: "女友達の結婚式に白いワンピースを着ていく<u>________</u>。白は花嫁の色だから。",
                translation: "不该穿白色连衣裙去女朋友的婚礼，因为白色是新娘的颜色。",
                grammar: "「～ものではない」：表行为上的“不应该、不合适”，基于常识或规则提出规劝，语气比「～てはいけない」委婉。",
                options: ["ものだ", "ものではない", "わけではない", "わけだ"],
                answer: "B",
                answerText: "ものではない"
            },
            {
                lesson: "第18课",
                number: 30,
                question: "大学生<u>________</u>漢字の能力を調査した。",
                translation: "以大学生为对象，调查了汉字能力。",
                grammar: "「名詞+を対象に」：固定结构，意为“以……为对象”，用于明确动作的目标群体，书面语和口语均常用。",
                options: ["を対象に", "をもとに", "を目的に", "をめぐって"],
                answer: "A",
                answerText: "を対象に"
            },

            // ===================== 第19课（语法题） =====================
            {
                lesson: "第19课",
                number: 11,
                question: "田中さんは勉強については________、私生活の問題まで何でも相談できる先輩だ。",
                translation: "田中前辈不仅在学习方面，就连私生活的问题也什么都能商量。",
                grammar: "「～はもちろんのこと」：意为“不仅……”，后接「まで/も」表递进，强调“不仅前者，后者也同样”，语气正式。",
                options: ["とにかく", "ばかりか", "もちろんのこと", "ともかく"],
                answer: "C",
                answerText: "もちろんのこと"
            },
            {
                lesson: "第19课",
                number: 12,
                question: "今月から来月____休暇をとるつもりだ。",
                translation: "我打算从这个月到下个月期间休假。",
                grammar: "「～から～にかけて」：固定搭配，意为“从……到……（期间）”，用于表示时间或空间的跨度，强调持续性。",
                options: ["をかけて", "がかけて", "にかけて", "とかけて"],
                answer: "C",
                answerText: "にかけて"
            },
            {
                lesson: "第19课",
                number: 13,
                question: "ここは温泉____、釣りや山登りも楽しめます。",
                translation: "这里不仅有温泉，还能享受钓鱼和登山的乐趣。",
                grammar: "「名詞+ばかりでなく」：意为“不仅……而且……”，表递进关系，后接「も/まで」，强调“除了前者还有后者”。",
                options: ["ばかりでなく", "ばかりで", "ばかりに", "ばかり"],
                answer: "A",
                answerText: "ばかりでなく"
            },
            {
                lesson: "第19课",
                number: 14,
                question: "世界平和____、国際会議が開かれる。",
                translation: "为了世界和平，召开了国际会议。",
                grammar: "「名詞+のために」：意为“为了……”，表目的，用于说明动作的初衷，后接积极的目的或正式的行为。",
                options: ["から", "より", "ので", "のために"],
                answer: "D",
                answerText: "のために"
            },
            {
                lesson: "第19课",
                number: 15,
                question: "この仕事にこんなにも打ち込むことができたのは、家族が支えていてくれたから____。",
                translation: "我之所以能这么投入这份工作，无非是因为有家人的支持。",
                grammar: "「～からにほかならない」：固定句型，意为“无非是因为……、正是因为……”，强调原因的唯一性，语气肯定。",
                options: ["にかぎる", "ほかならない", "にほかならない", "にかかる"],
                answer: "C",
                answerText: "にほかならない"
            },
            {
                lesson: "第19课",
                number: 16,
                question: "わたしたちは友人____知り合いになった。",
                translation: "我们通过朋友认识了彼此。",
                grammar: "「名詞+を通して」：意为“通过……、经由……”，表方式或媒介，强调通过某个中间环节达成结果。",
                options: ["に関して", "にわたって", "を通して", "について"],
                answer: "C",
                answerText: "を通して"
            },
            {
                lesson: "第19课",
                number: 17,
                question: "テレビの午後の番組はおもに主婦____組まれている。",
                translation: "电视下午的节目主要是以家庭主妇为对象编排的。",
                grammar: "「名詞+を対象に」：意为“以……为对象”，此处「組まれている」是被动形式，强调“节目被编排”的对象是主妇。",
                options: ["をつうじて", "を対象に", "に関して", "にかかって"],
                answer: "B",
                answerText: "を対象に"
            },
            {
                lesson: "第19课",
                number: 18,
                question: "男性____女性のほうが柔軟性があると言われる。",
                translation: "据说和男性相比，女性的柔韧性更好。",
                grammar: "「名詞+に比べて」：意为“与……相比”，用于两者对比，突出后项的特点，是日常和书面通用的对比句型。",
                options: ["にとって", "について", "にくらべて", "にわたって"],
                answer: "C",
                answerText: "にくらべて"
            },
            {
                lesson: "第19课",
                number: 19,
                question: "第一にロボットづくり____生徒の技術力の向上があげられる。",
                translation: "首先可以举出的是，通过制作机器人，学生的技术能力得到了提升。",
                grammar: "「名詞+による」：连体修饰结构，意为“由于……的、通过……的”，后接名词，此处表示“技术力的提升”源于“机器人制作”。",
                options: ["によって", "により", "によると", "による"],
                answer: "D",
                answerText: "による"
            },
            {
                lesson: "第19课",
                number: 20,
                question: "会社の上の人に命令された仕事なら、社員は嫌でもやら____。",
                translation: "如果是公司上级下达的工作，就算员工不愿意也不得不做。",
                grammar: "「～ざるをえない」：书面语，意为“不得不……、必须……”，是「～なければならない」的正式表达，强调客观上的被迫。",
                options: ["なくてもいい", "ざるをえない", "なくてもかまわない", "ないですむ"],
                answer: "B",
                answerText: "ざるをえない"
            },
            {
                lesson: "第19课",
                number: 21,
                question: "古代ギリシアで初めて学問____の数学が始まった。",
                translation: "在古希腊，数学首次作为一门学问诞生了。",
                grammar: "「名詞+として」：意为“作为……”，用于明确事物的身份、用途或性质，此处强调“数学的身份是学问”。",
                options: ["として", "とする", "にして", "にする"],
                answer: "A",
                answerText: "として"
            },
            {
                lesson: "第19课",
                number: 22,
                question: "海外旅行____、来年みんなでタイへ行く話が出ています。",
                translation: "说到海外旅行，大家有明年一起去泰国的打算。",
                grammar: "「名詞+といえば」：意为“说到……、提起……”，用于由某个话题引出相关的内容或话题，口语常用。",
                options: ["とすれば", "といえども", "といった", "といえば"],
                answer: "D",
                answerText: "といえば"
            },
            {
                lesson: "第19课",
                number: 23,
                question: "このゲーム機は子供________、大人にも人気がある。",
                translation: "这款游戏机不仅受孩子欢迎，也受大人喜爱。",
                grammar: "「名詞+ばかりでなく」：表递进，意为“不仅……而且……”，后接「にも」强调“大人也”，覆盖不同群体。",
                options: ["のために", "より", "だけで", "ばかりでない"],
                answer: "D",
                answerText: "ばかりでない"
            },
            {
                lesson: "第19课",
                number: 24,
                question: "あなたのことは____忘れません。",
                translation: "我绝对不会忘记你。",
                grammar: "「けっして+否定形」：副词「けっして」后接否定，意为“绝对（不）、万万（不）”，语气强烈，表坚定的决心。",
                options: ["めったに", "てっきり", "けっして", "はっきり"],
                answer: "C",
                answerText: "けっして"
            },
            {
                lesson: "第19课",
                number: 25,
                question: "買うかどうか________、まず何種類かカタログを見て検討しよう。",
                translation: "先不管买不买，我们先看看几种商品目录再考虑吧。",
                grammar: "「～はともかく」：意为“先不管……、暂且不论……”，用于先搁置某个问题，优先处理其他事项，口语常用。",
                options: ["はともかく", "考えながら", "として", "としても"],
                answer: "A",
                answerText: "はともかく"
            },

            // ===================== 第20课（语法题） =====================
            {
                lesson: "第20课",
                number: 17,
                question: "空港までは遠いので、朝7時に家を出ても遅い_________。",
                translation: "到机场很远，所以就算早上7点出门也不算早（也可能迟到）。",
                grammar: "「～くらいだ」：意为“到……程度、就算……也”，此处表“就算7点出门，也属于‘可能迟到’的程度”，弱化肯定语气。",
                options: ["わけではない", "ためだ", "ことだ", "くらいだ"],
                answer: "D",
                answerText: "くらいだ"
            },
            {
                lesson: "第20课",
                number: 18,
                question: "________以来、一度も日本食を食べていない。",
                translation: "回国以来，我一次日本菜都没吃过。",
                grammar: "「動詞た形+以来」：固定结构，意为“自从……以来”，强调从过去某个动作完成后，持续到现在的状态。",
                options: ["帰国して", "帰国し", "帰国の", "帰国してから"],
                answer: "A",
                answerText: "帰国して"
            },
            {
                lesson: "第20课",
                number: 19,
                question: "私はいい環境、いい協力者_________、恵まれた研究生活を送ることができた。",
                translation: "我在良好的环境和优秀合作者的支持下，度过了幸运的研究生活。",
                grammar: "「名詞+のもとで」：意为“在……之下、在……支持下”，用于表示动作发生的环境或依靠的条件。",
                options: ["のもとで", "ともに", "もとにして", "ともにした"],
                answer: "A",
                answerText: "のもとで"
            },
            {
                lesson: "第20课",
                number: 20,
                question: "電車で動かないから、歩いて帰る_________。",
                translation: "电车开不了了，所以只能步行回家。",
                grammar: "「～しかない」：意为“只能……、不得不……”，强调“没有其他选择，只能采取某种行动”，口语常用。",
                options: ["くらいだ", "ほどだ", "わけだ", "しかない"],
                answer: "D",
                answerText: "しかない"
            },
            {
                lesson: "第20课",
                number: 21,
                question: "苦労_________やっと栄光をつかんだ。",
                translation: "历经艰辛，终于获得了荣耀。",
                grammar: "「名詞+の末（に）」：意为“经过……之后、历经……终于”，强调经过一段过程后达成结果，书面语常用。",
                options: ["の時", "の機", "の末", "の際"],
                answer: "C",
                answerText: "の末"
            },
            {
                lesson: "第20课",
                number: 22,
                question: "病気になって_________、タバコを慎むようになりました。",
                translation: "自从生病以后，我就开始节制吸烟了。",
                grammar: "「動詞た形+以来」：表“自从……之后”，此处「病気になって以来」强调“生病”这个节点后，习惯发生改变。",
                options: ["後で", "以来", "末に", "の際"],
                answer: "B",
                answerText: "以来"
            },
            {
                lesson: "第20课",
                number: 23,
                question: "自分の食べるもの________、自分で作りなさい。",
                translation: "自己吃的东西，自己动手做吧。",
                grammar: "「名詞+ぐらい」：意为“至少……、就连……”，此处表“最基本的、至少自己吃的东西”，用于提出最低要求。",
                options: ["ぐらい", "ほど", "以上", "からして"],
                answer: "A",
                answerText: "ぐらい"
            },
            {
                lesson: "第20课",
                number: 24,
                question: "男性教師が生徒たちに:「おーい、気をつけろ。このあたりは毒蛇がいる________。」",
                translation: "男老师对学生们说：“喂，小心点！这附近有毒蛇哦。”",
                grammar: "「～ぞ」：终助词，用于男性对晚辈或平辈的提醒、警告，语气直接、随意，带有强调意味。",
                options: ["ね", "よね", "ぞ", "な"],
                answer: "C",
                answerText: "ぞ"
            },
            {
                lesson: "第20课",
                number: 25,
                question: "30年にわたる経験________、今ではこう言える。",
                translation: "凭借30年的经验，现在我才能这么说。",
                grammar: "「名詞+の末」：此处省略「に」，意为“经过……之后”，强调“30年经验积累后”得出的结论。",
                options: ["した結果", "を結果に", "した末", "の末"],
                answer: "D",
                answerText: "の末"
            },
            {
                lesson: "第20课",
                number: 26,
                question: "彼は作曲家である________演奏家でもある。",
                translation: "他既是作曲家，也是演奏家。",
                grammar: "「～と同時に」：意为“既是……也是……、与……同时”，用于表示同一主体的两种身份或动作同时存在，语气正式。",
                options: ["ながら", "と同時に", "ともに", "わけで"],
                answer: "B",
                answerText: "と同時に"
            },
            {
                lesson: "第20课",
                number: 27,
                question: "クリスさんは山口先生の________研究をすることになった。",
                translation: "克里斯决定在山口老师的指导下进行研究。",
                grammar: "「名詞+のもとで」：意为“在……的指导下、在……的基础上”，此处指“在老师的指导下”开展研究。",
                options: ["そばで", "したで", "もとで", "うえで"],
                answer: "C",
                answerText: "もとで"
            },
            {
                lesson: "第20课",
                number: 28,
                question: "スーパーもレストランも閉まっているなら、コンビニで_________。",
                translation: "如果超市和餐厅都关门了，就只能在便利店买了。",
                grammar: "「動詞基本形+しかない」：口语中常省略「する」，「かうしかない」=「買うしかない」，意为“只能买”。",
                options: ["買わない", "かうしかない", "買わなかった", "買った"],
                answer: "B",
                answerText: "かうしかない"
            },
            {
                lesson: "第20课",
                number: 29,
                question: "4歳の時に親を亡くし、田舎の祖父母________育てられた。",
                translation: "我4岁时父母双亡，在乡下的祖父母身边被抚养长大。",
                grammar: "「名詞+のもとで」：意为“在……身边、在……的照料下”，此处强调“在祖父母的照料下”成长。",
                options: ["のもとで", "のそばに", "のうえで", "の家に"],
                answer: "A",
                answerText: "のもとで"
            },
            {
                lesson: "第20课",
                number: 30,
                question: "スキーで骨折して________、寒くなると足が痛むようになった。",
                translation: "自从滑雪骨折后，一到天冷脚就会疼。",
                grammar: "「動詞た形+以来」：表“自从……之后”，强调“骨折”这个事件后，留下了“天冷脚疼”的后遗症。",
                options: ["以前", "以後", "以来", "以降"],
                answer: "C",
                answerText: "以来"
            },
            {
                lesson: "第20课",
                number: 31,
                question: "いろいろな仕事を渡り歩いた________、結局最初の仕事に落ち着いた。",
                translation: "换了很多份工作之后，最终还是回到了第一份工作安定下来。",
                grammar: "「動詞た形+末に」：意为“经过……之后、尝试……最终”，强调经过多次尝试后得出的结果。",
                options: ["あとで", "末に", "おかげで", "せいで"],
                answer: "B",
                answerText: "末に"
            },
            {
                lesson: "第20课",
                number: 32,
                question: "弟はある有名な音楽家の________、ピアノを習っている。",
                translation: "弟弟在一位著名音乐家的指导下学习钢琴。",
                grammar: "「名詞+のもとで」：意为“在……的指导下”，此处指“在音乐家的指导下”学习技能。",
                options: ["だけで", "そばで", "として", "もとで"],
                answer: "D",
                answerText: "もとで"
            },
            {
                lesson: "第20课",
                number: 33,
                question: "薬で治らないなら、手術を________しかない。",
                translation: "如果药物治不好，就只能做手术了。",
                grammar: "「動詞基本形+しかない」：意为“只能……”，此处「手術をするしかない」省略「する」，口语中常用「手術しかない」，但选项中需用完整形式。",
                options: ["する", "しては", "しない", "しよう"],
                answer: "A",
                answerText: "する"
            },

            // ===================== 第21课（语法题） =====================
            {
                lesson: "第21课",
                number: 25,
                question: "彼は上司の許可を得も________ずに、新しいプロジェクトを進めた。",
                translation: "他没有得到上司的许可，就推进了新的项目。",
                grammar: "「動詞ます形+もせず」：意为“没有……就……”，是「～ないで」的书面语强调形式，表“未做前项动作就做后项”。",
                options: ["せ", "し", "あら", "与え"],
                answer: "A",
                answerText: "せ"
            },
            {
                lesson: "第21课",
                number: 26,
                question: "お嬢さんが近々結婚なさる_____。おめでとうございます。",
                translation: "听说令嫒不久就要结婚了，恭喜恭喜。",
                grammar: "「～とか」：终助词，用于委婉地传达传闻或不确定的消息，语气礼貌，适合用于祝贺等正式场合。",
                options: ["ようだ", "はずだ", "とか", "ものだ"],
                answer: "C",
                answerText: "とか"
            },
            {
                lesson: "第21课",
                number: 27,
                question: "経済の専門家________言わせれば、円はこれからもっと高くなるらしい。",
                translation: "让经济专家来说的话，日元今后似乎还会升值。",
                grammar: "「名詞+に言わせれば」：意为“让……来说的话、从……的角度来看”，用于引用某人的观点或立场。",
                options: ["は", "が", "に", "で"],
                answer: "C",
                answerText: "に"
            },
            {
                lesson: "第21课",
                number: 28,
                question: "一度も_________に、「嫌い」と決めつけるのはよくないよ。",
                translation: "连一次都没尝试过，就断定“讨厌”是不好的哦。",
                grammar: "「動詞ます形+もせず」：意为“连……都不……就……”，强调“完全没有做前项动作”，语气比「～ないで」更强。",
                options: ["食べない", "食べもせず", "食べもしない", "食べもする"],
                answer: "B",
                answerText: "食べもせず"
            },
            {
                lesson: "第21课",
                number: 29,
                question: "どんな大金持ち_________、お金で解決できない悩みがあるはずだ。",
                translation: "无论多么有钱的人，应该都有金钱无法解决的烦恼。",
                grammar: "「名詞+といえども」：意为“即使……也……、无论……也……”，用于让步关系，强调“无论对象是谁，结果都不变”，书面语常用。",
                options: ["というと", "といったら", "といえども", "といえば"],
                answer: "C",
                answerText: "といえども"
            },
            {
                lesson: "第21课",
                number: 30,
                question: "よほど日本語が________人でも俳句を理解するのは難しい。",
                translation: "就算是日语相当好的人，理解俳句也很难。",
                grammar: "「形容詞+人」：「得意な人」=“擅长的人”，「よほど」加强程度，意为“相当擅长的人”，后接「でも」表让步。",
                options: ["得意な", "苦手な", "得意の", "苦手の"],
                answer: "A",
                answerText: "得意な"
            },
            {
                lesson: "第21课",
                number: 31,
                question: "どんなことでも事実かどうか確かめもせずに、そのよしあしを________。",
                translation: "无论什么事，不确认是否属实就评判好坏是不应该的。",
                grammar: "「～てはいけない」：意为“不应该……、不许……”，表禁止，基于道德或逻辑提出规范，语气比「～ものではない」更强烈。",
                options: ["判断したほうがいい", "判断しなくてもいい", "判断してもいい", "判断してはいけない"],
                answer: "D",
                answerText: "判断してはいけない"
            },
            {
                lesson: "第21课",
                number: 32,
                question: "狭い日本________、旅行したいところはたくさんある。",
                translation: "日本虽然狭小，但有很多想去旅行的地方。",
                grammar: "「名詞+といえども」：表让步，意为“虽然……但……”，强调“日本狭小”与“想去的地方多”之间的反差。",
                options: ["だから", "なので", "といえども", "ても"],
                answer: "C",
                answerText: "といえども"
            },
            {
                lesson: "第21课",
                number: 33,
                question: "歴史にはまだまだ________事実があるはずだ。",
                translation: "历史中应该还有很多不为人知的事实。",
                grammar: "「動詞未然形+ざる」：书面语否定形式，「知られざる」=“不被人知道的”，作定语修饰「事実」，表“未被发现的”。",
                options: ["聞かざる", "知られざる", "知らざる", "言わざる"],
                answer: "B",
                answerText: "知られざる"
            },

            // ===================== 第23课（语法题） =====================
            {
                lesson: "第23课",
                number: 16,
                question: "昨日の国際会議は8時間に________。",
                translation: "昨天的国际会议持续了8个小时。",
                grammar: "「時間+に及んだ」：意为“持续了……时间”，「及ぶ」表“达到、持续”，用于强调会议时间之长，书面语常用。",
                options: ["及んだ", "汲んだ", "渡した", "経った"],
                answer: "A",
                answerText: "及んだ"
            },
            {
                lesson: "第23课",
                number: 17,
                question: "あの学生はこれから大きく伸びる________。",
                translation: "那个学生今后很有可能会有很大的进步。",
                grammar: "「～可能性がある」：意为“有……的可能”，是表推测的常用结构，语气客观，用于说明某件事发生的概率。",
                options: ["可能化がある", "可能性がある", "恐れがある", "わけがある"],
                answer: "B",
                answerText: "可能性がある"
            },
            {
                lesson: "第23课",
                number: 18,
                question: "値段を決める________、もっとも重要なのは製品のコストだ。",
                translation: "在决定价格时，最重要的是产品的成本。",
                grammar: "「動詞基本形+うえで」：意为“在……之后、在……方面”，此处表“在决定价格这一事项上”，强调考虑的维度。",
                options: ["それで", "それに", "うえに", "うえで"],
                answer: "D",
                answerText: "うえで"
            },
            {
                lesson: "第23课",
                number: 19,
                question: "日本語が分かってくる________、日本での生活が楽しくなった。",
                translation: "随着日语渐渐听懂，在日本的生活也变得快乐起来。",
                grammar: "「動詞て形+くる+につれて」：意为“随着……越来越……”，表“日语听懂”的程度提升，伴随“生活快乐”的变化。",
                options: ["につれて", "について", "にわたって", "において"],
                answer: "A",
                answerText: "につれて"
            },
            {
                lesson: "第23课",
                number: 20,
                question: "いくら季節外れだ________、千両は高すぎると思った。",
                translation: "就算是反季节，千两（食材）也觉得太贵了。",
                grammar: "「～といえども」：表让步，意为“即使……也……”，「いくら」加强程度，强调“无论多么反季节”，仍觉得价格高。",
                options: ["といえば", "というと", "とすれば", "といえども"],
                answer: "D",
                answerText: "といえども"
            },
            {
                lesson: "第23课",
                number: 21,
                question: "これは弦楽器である________、打楽器でもある。",
                translation: "这既是弦乐器，也是打击乐器。",
                grammar: "「～と同時に」：意为“既是……也是……”，表同一事物的两种属性并存，语气正式、客观。",
                options: ["にそって", "と同時に", "うえは", "以上は"],
                answer: "B",
                answerText: "と同時に"
            },
            {
                lesson: "第23课",
                number: 22,
                question: "卒業し________、音楽から離れていました。",
                translation: "毕业后，我就远离音乐了。",
                grammar: "「動詞て形+いらい」：意为“自从……之后一直……”，是「～て以来」的口语化表达，强调“毕业”后持续的状态。",
                options: ["たにもかかわらず", "たとともに", "ていらい", "たとみえて"],
                answer: "C",
                answerText: "ていらい"
            },
            {
                lesson: "第23课",
                number: 23,
                question: "結果________、実行できるのがいい選手です。",
                translation: "先不管结果如何，能付诸行动的才是好选手。",
                grammar: "「名詞+はともかく」：意为“先不管……、暂且不论……”，搁置“结果”这一因素，强调“执行力”的重要性。",
                options: ["はともかく", "からみて", "をめぐって", "をかぎりに"],
                answer: "A",
                answerText: "はともかく"
            },
            {
                lesson: "第23课",
                number: 24,
                question: "人間にとって時の流れほど強い味方はない________。",
                translation: "对于人类来说，没有比时间的流逝更强大的盟友了。",
                grammar: "「～ものだ」：表感慨、真理，意为“……啊、……才是”，用于表达对普遍真理的感慨，语气深沉。",
                options: ["ようだ", "みたいだ", "そうだ", "ものだ"],
                answer: "D",
                answerText: "ものだ"
            },
            {
                lesson: "第23课",
                number: 25,
                question: "昨日の自分________、今日の自分はどうかを考えなさい。",
                translation: "请对比昨天的自己，思考一下今天的自己怎么样了。",
                grammar: "「名詞+とくらべて」：意为“与……对比”，「くらべて」是「比べて」的口语化省略，用于建议自我对比、反思。",
                options: ["としては", "とともに", "とくらべて", "としらべて"],
                answer: "C",
                answerText: "とくらべて"
            },

            // ===================== 第24课（语法题） =====================
            {
                lesson: "第24课",
                number: 17,
                question: "この歌は子供からお年寄り_______至るまで、みんなに親しまれている。",
                translation: "这首歌从小孩到老人，深受所有年龄段的人喜爱。",
                grammar: "「～から～に至るまで」：固定搭配，意为“从……到……（范围）”，表覆盖全部范围，书面语常用，比「～から～まで」更正式。",
                options: ["は", "が", "に", "を"],
                answer: "C",
                answerText: "に"
            },
            {
                lesson: "第24课",
                number: 18,
                question: "型にはまってないものは一つ_______ありません。",
                translation: "没有一个事物是不墨守成规的（所有事物都符合某种模式）。",
                grammar: "「名詞+として」：意为“作为……”，此处「一つとして」是固定表达，意为“就连一个……都（不）”，表全面否定。",
                options: ["にとって", "にして", "として", "以上"],
                answer: "C",
                answerText: "として"
            },
            {
                lesson: "第24课",
                number: 19,
                question: "世界には、許され________差別がまだ残っている。",
                translation: "世界上还残留着不被允许的歧视。",
                grammar: "「動詞未然形+ざる」：书面语否定形式，「許されざる」=“不被允许的”，作定语修饰「差別」，语气正式、严肃。",
                options: ["ざる", "たい", "ながら", "うる"],
                answer: "A",
                answerText: "ざる"
            },
            {
                lesson: "第24课",
                number: 20,
                question: "よく食べて、よく寝________すれば、病気にならない。",
                translation: "只要吃好睡好，就不会生病。",
                grammar: "「動詞て形+さえすれば」：意为“只要……就……”，表充分条件，强调“吃好睡好”是“不生病”的足够条件。",
                options: ["に", "も", "こそ", "さえ"],
                answer: "D",
                answerText: "さえ"
            },
            {
                lesson: "第24课",
                number: 21,
                question: "家族が健康に暮らして________いれば、十分に幸せです。",
                translation: "只要家人健康生活，我就足够幸福了。",
                grammar: "「動詞て形+さえいれば」：意为“只要……就……”，「いれば」是「いる」的假定形，强调“家人健康存续”是“幸福”的充分条件。",
                options: ["こと", "さて", "さえ", "もの"],
                answer: "C",
                answerText: "さえ"
            },
            {
                lesson: "第24课",
                number: 22,
                question: "故郷で暮らす母を思わない日は一日________ありません。",
                translation: "没有一天不想念在故乡生活的母亲。",
                grammar: "「名詞+として」：此处「一日として」是固定表达，意为“就连一天都（不）”，与「ない」搭配表“没有一天不……”，强调思念的持续性。",
                options: ["のに", "でも", "にも", "として"],
                answer: "D",
                answerText: "として"
            },
            {
                lesson: "第24课",
                number: 23,
                question: "家賃が払えない________、出ていくしかない。",
                translation: "既然交不起房租，就只能搬出去了。",
                grammar: "「～以上」：意为“既然……就……”，表基于前项的事实，得出后项的必然结论，语气果断。",
                options: ["以前", "以後", "以上", "以下"],
                answer: "C",
                answerText: "以上"
            },
            {
                lesson: "第24课",
                number: 24,
                question: "子供のことを心配する________、つい電話をしては嫌がられている。",
                translation: "因为太担心孩子，总是打电话，结果被讨厌了。",
                grammar: "「動詞た形+あまり」：意为“因为过于……而……”，表“担心”的程度过重，导致“被讨厌”的负面结果。",
                options: ["あまり", "せい", "おかげ", "もので"],
                answer: "A",
                answerText: "あまり"
            },
            {
                lesson: "第24课",
                number: 25,
                question: "君のようなお金の価値がわからない人にお金を貸す人は一人________いない。",
                translation: "不会有人愿意借钱给像你这样不懂金钱价值的人。",
                grammar: "「名詞+として」：「一人として」=“就连一个人都（不）”，与「ない」搭配表“没有一个人……”，全面否定可能性。",
                options: ["くらい", "だけ", "といえども", "として"],
                answer: "D",
                answerText: "として"
            }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let correctCount = 0;

    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const submitBtn = document.getElementById('submitBtn');
    const nextBtn = document.getElementById('nextBtn');
    const quizArea = document.getElementById('quizArea');
    const questionContainer = document.getElementById('questionContainer');
    const feedback = document.getElementById('feedback');
    const result = document.getElementById('result');
    const resultText = document.getElementById('resultText');
    const progressBar = document.getElementById('progressBar');
    const questionCountSelect = document.getElementById('questionCount');

    startBtn.addEventListener('click', () => {
        const count = questionCountSelect.value;

        const grammarQuestions = allQuestions.filter(q => q.grammar);

        // ⭐ 关键：统一先乱序
        const shuffledQuestions = shuffle(grammarQuestions);

        if (count === 'all') {
            currentQuestions = shuffledQuestions;
        } else {
            currentQuestions = shuffledQuestions.slice(0, parseInt(count));
        }

        currentIndex = 0;
        correctCount = 0;

        quizArea.style.display = 'block';
        result.style.display = 'none';

        renderQuestion();
        updateProgress();
    });

    restartBtn.addEventListener('click', () => {
        startBtn.click();
    });

    submitBtn.addEventListener('click', () => {
        const selectedOption = document.querySelector('.option.selected');
        if (!selectedOption) {
            alert('答えを選択してください！');
            return;
        }

        const selectedAnswer = selectedOption.dataset.answer;
        const currentQuestion = currentQuestions[currentIndex];
        const isCorrect = selectedAnswer === currentQuestion.answer;

        feedback.style.display = 'block';
        feedback.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');

        if (isCorrect) correctCount++;

        feedback.innerHTML = `
            <strong>${isCorrect ? '正解！' : '不正解'}</strong>
            <div class="translation">翻訳：${currentQuestion.translation}</div>
            <div class="grammar">文法解説：${currentQuestion.grammar}</div>
            <div>正しい答え：${currentQuestion.answerText}（${currentQuestion.answer}）</div>
        `;

        document.querySelectorAll('.option').forEach(o => o.style.pointerEvents = 'none');
        submitBtn.style.display = 'none';
        nextBtn.style.display = 'inline-block';
    });

    nextBtn.addEventListener('click', () => {
        currentIndex++;
        if (currentIndex < currentQuestions.length) {
            renderQuestion();
            feedback.style.display = 'none';
            submitBtn.style.display = 'inline-block';
            nextBtn.style.display = 'none';
            updateProgress();
        } else {
            showResult();
        }
    });

    function renderQuestion() {
        const q = currentQuestions[currentIndex];
        let html = '';

        q.options.forEach((opt, i) => {
            const label = String.fromCharCode(65 + i);
            html += `<div class="option" data-answer="${label}">${label}、${opt}</div>`;
        });

        questionContainer.innerHTML = `
            <h3>第${currentIndex + 1}/${currentQuestions.length}問（${q.lesson} 第${q.number}問）</h3>
            <div>${q.question}</div>
            <div class="options">${html}</div>
        `;

        document.querySelectorAll('.option').forEach(opt => {
            opt.onclick = () => {
                document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
                opt.classList.add('selected');
            };
            opt.style.pointerEvents = 'auto';
        });
    }

    function updateProgress() {
        progressBar.style.width = `${((currentIndex + 1) / currentQuestions.length) * 100}%`;
    }

    function showResult() {
        const total = currentQuestions.length;
        const score = Math.round((correctCount / total) * 100);
        resultText.textContent = `${total}問中${correctCount}問正解（${score}%）`;
        quizArea.style.display = 'none';
        result.style.display = 'block';
        progressBar.style.width = '100%';
    }
</script>


</body>
</html>
